{"ast":null,"code":"var _jsxFileName = \"/Users/aundrekerr/Documents/GitHub/gunsmith/src/components/Weapon/Mods.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { storeMod } from './../../actions/weaponActions';\nimport Tooltip from './../Tooltip.js';\nimport { Route } from \"react-router-dom\";\nimport Hashids from 'hashids';\nconst hashids = new Hashids();\n\nclass Mods extends Component {\n  constructor(props) {\n    super(props);\n    const {\n      manifest\n    } = this.props;\n    let modList = [];\n    Object.keys(manifest.DestinyInventoryItemDefinition).map(mod => {\n      return manifest.DestinyInventoryItemDefinition[mod].itemType === 19 && manifest.DestinyInventoryItemDefinition[mod].itemCategoryHashes.includes(1052191496) && manifest.DestinyInventoryItemDefinition[mod].plug.plugCategoryIdentifier.includes('v400') ? modList.push(manifest.DestinyInventoryItemDefinition[mod]) : null;\n    });\n    this.state = {\n      modList: modList,\n      activeMod: {\n        hash: 0\n      },\n      toggleActiveMod: mod => {\n        this.setState(({\n          activeMod\n        }) => ({\n          activeMod: activeMod.hash === mod.hash ? {\n            hash: 0\n          } : mod\n        }));\n      }\n    };\n  }\n\n  componentDidMount() {\n    const {\n      weapon\n    } = this.props;\n\n    if (weapon.mod.hash !== 0) {\n      this.setState({\n        activeMod: {\n          hash: weapon.mod.hash\n        }\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      weapon\n    } = this.props;\n\n    if (weapon.hash !== prevProps.weapon.hash) {\n      this.setState({\n        activeMod: {\n          hash: 0\n        }\n      });\n    }\n  }\n\n  render() {\n    const {\n      state: {\n        modList,\n        activeMod,\n        toggleActiveMod\n      },\n      props: {\n        manifest,\n        weapon\n      }\n    } = this;\n    const itemDef = manifest.DestinyInventoryItemDefinition[weapon.hash];\n    const itemTier = itemDef.inventory.tierType;\n\n    if (itemTier !== 5) {\n      return React.createElement(\"div\", {\n        className: \"weapon__tab weapon__mods empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"uppercase tracked-wide underline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"Weapon Mods\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"This weapon cannot equip a mod.\"));\n    } else {\n      return React.createElement(\"div\", {\n        className: \"weapon__tab weapon__mods\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"uppercase tracked-wide underline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Weapon Mods\"), React.createElement(\"div\", {\n        className: \"mod-list__wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"mod-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, modList.map(mod => {\n        return React.createElement(Route, {\n          key: mod.hash,\n          render: ({\n            history\n          }) => React.createElement(\"li\", {\n            className: activeMod.hash === mod.hash ? 'node active' : 'node',\n            onClick: () => {\n              this.props.storeMod(mod);\n              toggleActiveMod(mod);\n              let builtId = hashids.encode(weapon.hash, weapon.perks.slotOne.hash, weapon.perks.slotTwo.hash, weapon.perks.slotThree.hash, weapon.perks.slotFour.hash, activeMod.hash !== mod.hash ? mod.hash : 0, weapon.masterwork.hash);\n              history.push(`/w/${builtId}`);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 89\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"mod-icon\",\n            \"data-for\": `getContent-${mod.hash}`,\n            \"data-tip\": true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 106\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: `https://bungie.net${mod.displayProperties.icon}`,\n            alt: \"\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 107\n            },\n            __self: this\n          })), React.createElement(Tooltip, {\n            hash: mod.hash,\n            title: mod.displayProperties.name,\n            subtitle: mod.itemTypeDisplayName,\n            description: manifest.DestinySandboxPerkDefinition[mod.perks[0].perkHash].displayProperties.description,\n            stats: mod.investmentStats.length > 0 ? mod.investmentStats : null,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 109\n            },\n            __self: this\n          })),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        });\n      }))));\n    }\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  manifest: state.manifest,\n  weapon: state.weapon\n});\n\nexport default connect(mapStateToProps, {\n  storeMod\n})(Mods);","map":{"version":3,"sources":["/Users/aundrekerr/Documents/GitHub/gunsmith/src/components/Weapon/Mods.js"],"names":["React","Component","connect","storeMod","Tooltip","Route","Hashids","hashids","Mods","constructor","props","manifest","modList","Object","keys","DestinyInventoryItemDefinition","map","mod","itemType","itemCategoryHashes","includes","plug","plugCategoryIdentifier","push","state","activeMod","hash","toggleActiveMod","setState","componentDidMount","weapon","componentDidUpdate","prevProps","render","itemDef","itemTier","inventory","tierType","history","builtId","encode","perks","slotOne","slotTwo","slotThree","slotFour","masterwork","displayProperties","icon","name","itemTypeDisplayName","DestinySandboxPerkDefinition","perkHash","description","investmentStats","length","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { storeMod } from './../../actions/weaponActions';\nimport Tooltip from './../Tooltip.js';\nimport { Route } from \"react-router-dom\";\nimport Hashids from 'hashids';\nconst hashids = new Hashids();\n\nclass Mods extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tconst { manifest } = this.props;\n\t\tlet modList = [];\n\t\t\n\t\tObject.keys(manifest.DestinyInventoryItemDefinition).map(mod => {\n\t\t\treturn manifest.DestinyInventoryItemDefinition[mod].itemType === 19\n\t\t\t\t&& manifest.DestinyInventoryItemDefinition[mod].itemCategoryHashes.includes(1052191496)\n\t\t\t\t&& manifest.DestinyInventoryItemDefinition[mod].plug.plugCategoryIdentifier.includes('v400')\n\t\t\t\t\t? modList.push(manifest.DestinyInventoryItemDefinition[mod])\n\t\t\t\t\t: null\n\t\t})\n\t\t\n\n\t\tthis.state = {\n\t\t\tmodList: modList,\n\t\t\tactiveMod: { hash: 0 },\n\t\t\ttoggleActiveMod: ( mod ) => {\n\t\t\t\tthis.setState(({ activeMod }) => ({\n\t\t\t\t\tactiveMod: activeMod.hash === mod.hash ? { hash: 0 } : mod\n\t\t\t\t}))\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { weapon } = this.props;\n\n\t\tif ( weapon.mod.hash !== 0 ) { \t\n\t\t\tthis.setState({\n\t\t\t\tactiveMod: { hash: weapon.mod.hash }\n\t\t\t})\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tconst { weapon } = this.props;\n\n\t\tif ( weapon.hash !== prevProps.weapon.hash ) { \t\n\t\t\tthis.setState({\n\t\t\t\tactiveMod: { hash: 0 }\n\t\t\t})\n\t\t}\n\t}\n\n\trender(){\n\t\tconst {\n\t\t\tstate: {\n\t\t\t\tmodList,\n\t\t\t\tactiveMod,\n\t\t\t\ttoggleActiveMod\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tmanifest,\n\t\t\t\tweapon,\n\t\t\t}\n\t\t} = this;\n\n\t\tconst itemDef = manifest.DestinyInventoryItemDefinition[weapon.hash];\n\t\tconst itemTier = itemDef.inventory.tierType;\n\n\t\tif (itemTier !== 5) {\n\t\t\treturn (\n\t\t\t\t<div className=\"weapon__tab weapon__mods empty\">\n\t\t\t\t\t<span className=\"uppercase tracked-wide underline\">Weapon Mods</span>\n\t\t\t\t\t<span>This weapon cannot equip a mod.</span>\n\t\t\t\t</div>\n\t\t\t)\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<div className=\"weapon__tab weapon__mods\">\n\t\t\t\t\t<span className=\"uppercase tracked-wide underline\">Weapon Mods</span>\n\t\t\t\t\t<div className=\"mod-list__wrapper\">\n\t\t\t\t\t\t<ul className=\"mod-list\">\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmodList.map(mod => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Route key={mod.hash} render={({ history }) => (\n\t\t\t\t\t\t\t\t\t\t\t<li className={ \n\t\t\t\t\t\t\t\t\t\t\t\t\tactiveMod.hash === mod.hash ? 'node active' : 'node' \n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => { \n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.storeMod(mod); \n\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleActiveMod(mod);\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet builtId = hashids.encode(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tweapon.hash, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tweapon.perks.slotOne.hash, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tweapon.perks.slotTwo.hash, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tweapon.perks.slotThree.hash, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tweapon.perks.slotFour.hash, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactiveMod.hash !== mod.hash ? mod.hash : 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tweapon.masterwork.hash\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\thistory.push(`/w/${ builtId }`); \n\t\t\t\t\t\t\t\t\t\t\t} }>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mod-icon\" data-for={`getContent-${mod.hash}`} data-tip>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img src={`https://bungie.net${ mod.displayProperties.icon }`} alt=\"\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip \n\t\t\t\t\t\t\t\t\t\t\t\t\thash={ mod.hash }\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={ mod.displayProperties.name }\n\t\t\t\t\t\t\t\t\t\t\t\t\tsubtitle={ mod.itemTypeDisplayName }\n\t\t\t\t\t\t\t\t\t\t\t\t\tdescription={ manifest.DestinySandboxPerkDefinition[mod.perks[0].perkHash].displayProperties.description }\n\t\t\t\t\t\t\t\t\t\t\t\t\tstats={ mod.investmentStats.length > 0 ? mod.investmentStats : null }\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t)} />\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tmanifest: state.manifest,\n\tweapon: state.weapon,\n});\n\nexport default connect(mapStateToProps, {\n\tstoreMod\n})(Mods);"]},"metadata":{},"sourceType":"module"}