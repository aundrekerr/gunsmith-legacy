{"ast":null,"code":"var _jsxFileName = \"/Users/aundrekerr/Documents/GitHub/gunsmith/src/components/Weapon/Masterworks.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { getMasterworks } from './../../utils/masterworks.js';\nimport { storeMasterwork } from './../../actions/weaponActions';\nimport Tooltip from './../Tooltip.js';\nimport { Route } from \"react-router-dom\";\nimport Hashids from 'hashids';\nconst hashids = new Hashids();\n\nclass Masterworks extends Component {\n  constructor(props) {\n    super(props);\n\n    this.swapTitle = title => {\n      switch (title) {\n        case 'stability':\n          return 'Stability';\n\n        case 'range':\n          return 'Range';\n\n        case 'handling':\n          return 'Handling';\n\n        case 'damage':\n          return 'Impact';\n\n        case 'reload':\n          return 'Reload Speed';\n\n        case 'blast_radius':\n          return 'Blast Radius';\n\n        case 'projectile_speed':\n          return 'Velocity';\n\n        case 'charge_time':\n          return 'Charge Time';\n\n        case 'draw_time':\n          return 'Draw Time';\n\n        case 'accuracy':\n          return 'Accuracy';\n\n        default:\n          return title;\n      }\n    };\n\n    this.changeCurrentMWStat = e => {\n      this.setState({\n        currentMWStat: e.target.value\n      });\n    };\n\n    const {\n      manifest,\n      weapon\n    } = this.props;\n    const retrievedMWs = getMasterworks(manifest, weapon.hash);\n    this.state = {\n      masterworks: retrievedMWs,\n      activeMW: {\n        hash: 0\n      },\n      currentMWStat: Object.keys(retrievedMWs.mwCollection)[0],\n      toggleActiveMW: mod => {\n        this.setState(({\n          activeMW\n        }) => ({\n          activeMW: activeMW.hash === mod.hash ? {\n            hash: 0\n          } : mod\n        }));\n      }\n    };\n  }\n\n  componentDidMount() {\n    const {\n      manifest,\n      weapon\n    } = this.props;\n\n    if (weapon.masterwork.hash !== 0) {\n      const mwDef = manifest.DestinyInventoryItemDefinition[weapon.masterwork.hash];\n      const mwStatSplit = mwDef.plug.plugCategoryIdentifier.split('.');\n      const mwStatName = mwStatSplit[mwStatSplit.length - 1];\n      this.setState({\n        activeMW: {\n          hash: weapon.masterwork.hash\n        },\n        currentMWStat: mwStatName\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      manifest,\n      weapon\n    } = this.props;\n\n    if (weapon.hash !== prevProps.weapon.hash) {\n      this.setState({\n        masterworks: getMasterworks(manifest, weapon.hash),\n        activeMW: {\n          hash: 0\n        }\n      });\n    }\n  }\n\n  render() {\n    const {\n      state: {\n        masterworks,\n        activeMW,\n        toggleActiveMW,\n        currentMWStat\n      },\n      props: {\n        manifest,\n        weapon,\n        storeMasterwork\n      },\n      swapTitle,\n      changeCurrentMWStat\n    } = this;\n    const itemDef = manifest.DestinyInventoryItemDefinition[weapon.hash];\n    const itemTier = masterworks !== null ? itemDef.inventory.tierType : 0;\n\n    if (itemTier === 5) {\n      // Legendary\n      return React.createElement(\"div\", {\n        className: \"weapon__tab weapon__masterworks\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(Masterwork, {\n        weapon: weapon,\n        masterworks: masterworks.mwCollection,\n        isY1: masterworks.isY1,\n        activeMW: activeMW,\n        currentMWStat: currentMWStat,\n        changeCurrentMWStat: changeCurrentMWStat,\n        toggleActiveMW: toggleActiveMW,\n        storeMasterwork: storeMasterwork,\n        swapTitle: swapTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }));\n    } else if (itemTier === 6) {\n      // Exotic\n      return React.createElement(\"div\", {\n        className: \"weapon__tab weapon__masterworks\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Catalyst, {\n        activeMW: activeMW,\n        catalyst: masterworks.catalystDefs,\n        toggleActiveMW: toggleActiveMW,\n        storeMasterwork: storeMasterwork,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }));\n    } else {\n      return React.createElement(\"div\", {\n        className: \"weapon__tab weapon__masterworks\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"uppercase tracked-wide underline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Masterwork\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"This weapon cannot equip a masterwork.\"));\n    }\n  }\n\n}\n\nconst Masterwork = props => {\n  const {\n    masterworks,\n    weapon,\n    isY1,\n    currentMWStat,\n    changeCurrentMWStat,\n    activeMW,\n    toggleActiveMW,\n    storeMasterwork,\n    swapTitle\n  } = props;\n\n  if (isY1) {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"uppercase tracked-wide underline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"Masterwork\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Under construction.\"));\n  } else {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"uppercase tracked-wide underline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Masterwork\"), React.createElement(\"div\", {\n      className: \"masterwork-sections\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"mw-stat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      name: \"mw-stat\",\n      onChange: changeCurrentMWStat,\n      value: currentMWStat,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, Object.keys(masterworks).map(mwStat => {\n      if (masterworks[mwStat].active) {\n        return React.createElement(\"option\", {\n          key: mwStat,\n          value: mwStat,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, swapTitle(mwStat));\n      }\n\n      return true;\n    }))), React.createElement(\"ul\", {\n      className: \"masterwork-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, masterworks[currentMWStat].benefits.map(mw => {\n      return React.createElement(Route, {\n        key: mw.hash,\n        render: ({\n          history\n        }) => React.createElement(\"li\", {\n          className: activeMW.hash === mw.hash ? 'node active' : 'node',\n          onClick: () => {\n            storeMasterwork(mw);\n            toggleActiveMW(mw);\n            let builtId = hashids.encode(weapon.hash, weapon.perks.slotOne.hash, weapon.perks.slotTwo.hash, weapon.perks.slotThree.hash, weapon.perks.slotFour.hash, weapon.mod.hash, activeMW.hash !== mw.hash ? mw.hash : 0);\n            history.push(`/w/${builtId}`);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"mw-icon\",\n          \"data-for\": `getContent-${mw.hash}`,\n          \"data-tip\": true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: `https://bungie.net${mw.displayProperties.icon}`,\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        })), React.createElement(Tooltip, {\n          hash: mw.hash,\n          title: mw.displayProperties.name,\n          subtitle: mw.itemTypeDisplayName,\n          description: mw.displayProperties.description,\n          stats: mw.investmentStats.length > 0 ? mw.investmentStats : null,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        })),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      });\n    })))));\n  }\n};\n\nconst Catalyst = props => {\n  const {\n    catalyst,\n    activeMW,\n    toggleActiveMW,\n    storeMasterwork\n  } = props;\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"uppercase tracked-wide underline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235\n    },\n    __self: this\n  }, \"Catalyst\"), React.createElement(\"div\", {\n    className: \"masterwork-sections\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"masterwork-list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  }, catalyst.map(mw => {\n    return React.createElement(\"li\", {\n      key: mw.hash,\n      className: activeMW.hash === mw.hash ? 'node active' : 'node',\n      onClick: () => {\n        storeMasterwork(mw);\n        toggleActiveMW(mw);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"mw-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: `https://bungie.net${mw.displayProperties.icon}`,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    })));\n  }))));\n};\n\nconst mapStateToProps = state => ({\n  manifest: state.manifest,\n  weapon: state.weapon,\n  tooltip: state.tooltip\n});\n\nexport default connect(mapStateToProps, {\n  storeMasterwork\n})(Masterworks);","map":{"version":3,"sources":["/Users/aundrekerr/Documents/GitHub/gunsmith/src/components/Weapon/Masterworks.js"],"names":["React","Component","connect","getMasterworks","storeMasterwork","Tooltip","Route","Hashids","hashids","Masterworks","constructor","props","swapTitle","title","changeCurrentMWStat","e","setState","currentMWStat","target","value","manifest","weapon","retrievedMWs","hash","state","masterworks","activeMW","Object","keys","mwCollection","toggleActiveMW","mod","componentDidMount","masterwork","mwDef","DestinyInventoryItemDefinition","mwStatSplit","plug","plugCategoryIdentifier","split","mwStatName","length","componentDidUpdate","prevProps","render","itemDef","itemTier","inventory","tierType","isY1","catalystDefs","Masterwork","map","mwStat","active","benefits","mw","history","builtId","encode","perks","slotOne","slotTwo","slotThree","slotFour","push","displayProperties","icon","name","itemTypeDisplayName","description","investmentStats","Catalyst","catalyst","mapStateToProps","tooltip"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { getMasterworks } from './../../utils/masterworks.js';\nimport { storeMasterwork } from './../../actions/weaponActions';\nimport Tooltip from './../Tooltip.js';\nimport { Route } from \"react-router-dom\";\nimport Hashids from 'hashids';\nconst hashids = new Hashids();\n\nclass Masterworks extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tconst { manifest, weapon } = this.props;\n\t\tconst retrievedMWs = getMasterworks(manifest, weapon.hash);\n\n\t\tthis.state = {\n\t\t\tmasterworks: retrievedMWs,\n\t\t\tactiveMW: { hash: 0 },\n\t\t\tcurrentMWStat: Object.keys(retrievedMWs.mwCollection)[0],\n\t\t\ttoggleActiveMW: ( mod ) => {\n\t\t\t\tthis.setState(({ activeMW }) => ({\n\t\t\t\t\tactiveMW: activeMW.hash === mod.hash ? { hash: 0 } : mod\n\t\t\t\t}))\n\t\t\t},\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { manifest, weapon } = this.props;\n\t\tif ( weapon.masterwork.hash !== 0 ) {\n\t\t\tconst mwDef = manifest.DestinyInventoryItemDefinition[weapon.masterwork.hash];\n\t\t\tconst mwStatSplit = mwDef.plug.plugCategoryIdentifier.split('.');\n\t\t\tconst mwStatName = mwStatSplit[mwStatSplit.length - 1];\n\n\t\t\tthis.setState({\n\t\t\t\tactiveMW: { hash: weapon.masterwork.hash },\n\t\t\t\tcurrentMWStat: mwStatName\n\t\t\t})\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tconst { manifest, weapon } = this.props;\n\t\tif ( weapon.hash !== prevProps.weapon.hash ) {\n\t\t\tthis.setState({ \n\t\t\t\tmasterworks: getMasterworks(manifest, weapon.hash),\n\t\t\t\tactiveMW: { hash: 0 }\n\t\t\t})\n\t\t}\n\t}\n\n\tswapTitle = (title) => {\n\t\tswitch(title) {\n\t\t\tcase 'stability': return 'Stability';\n\t\t\tcase 'range': return 'Range';\n\t\t\tcase 'handling': return 'Handling';\n\t\t\tcase 'damage': return 'Impact';\n\t\t\tcase 'reload': return 'Reload Speed';\n\t\t\tcase 'blast_radius': return 'Blast Radius';\n\t\t\tcase 'projectile_speed': return 'Velocity';\n\t\t\tcase 'charge_time': return 'Charge Time';\n\t\t\tcase 'draw_time': return 'Draw Time';\n\t\t\tcase 'accuracy': return 'Accuracy';\n\n\t\t\tdefault: return title;\n\t\t}\n\t}\n\n\tchangeCurrentMWStat = e => {\n\t\tthis.setState({\n\t\t\tcurrentMWStat: e.target.value\n\t\t})\n\t}\n\t\n\trender(){\n\t\tconst {\n\t\t\tstate: {\n\t\t\t\tmasterworks,\n\t\t\t\tactiveMW,\n\t\t\t\ttoggleActiveMW,\n\t\t\t\tcurrentMWStat,\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tmanifest,\n\t\t\t\tweapon,\n\t\t\t\tstoreMasterwork,\n\t\t\t},\n\t\t\tswapTitle,\n\t\t\tchangeCurrentMWStat\n\t\t} = this;\n\n\t\tconst itemDef = manifest.DestinyInventoryItemDefinition[weapon.hash];\n\t\tconst itemTier = masterworks !== null ? itemDef.inventory.tierType : 0;\n\n\t\tif (itemTier === 5) { // Legendary\n\t\t\treturn (\n\t\t\t\t<div className=\"weapon__tab weapon__masterworks\">\n\t\t\t\t\t<Masterwork \n\t\t\t\t\t\tweapon={ weapon }\n\t\t\t\t\t\tmasterworks={ masterworks.mwCollection }\n\t\t\t\t\t\t\n\t\t\t\t\t\tisY1={ masterworks.isY1 }\n\t\t\t\t\t\tactiveMW={ activeMW }\n\t\t\t\t\t\tcurrentMWStat={ currentMWStat }\n\t\t\t\t\t\tchangeCurrentMWStat={ changeCurrentMWStat }\n\t\t\t\t\t\ttoggleActiveMW={ toggleActiveMW }\n\n\t\t\t\t\t\tstoreMasterwork={ storeMasterwork }\n\t\t\t\t\t\tswapTitle={ swapTitle }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)\n\t\t} else if (itemTier === 6) { // Exotic\n\t\t\treturn (\n\t\t\t\t<div className=\"weapon__tab weapon__masterworks\">\n\t\t\t\t\t<Catalyst \n\t\t\t\t\t\tactiveMW={ activeMW }\n\t\t\t\t\t\tcatalyst={ masterworks.catalystDefs }\n\t\t\t\t\t\ttoggleActiveMW={ toggleActiveMW }\n\t\t\t\t\t\tstoreMasterwork={ storeMasterwork }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<div className=\"weapon__tab weapon__masterworks\">\n\t\t\t\t\t<span className=\"uppercase tracked-wide underline\">Masterwork</span>\n\t\t\t\t\t<span>This weapon cannot equip a masterwork.</span>\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t}\n}\n\nconst Masterwork = (props) => {\n\tconst {\n\t\tmasterworks,\n\t\tweapon,\n\t\tisY1,\n\t\tcurrentMWStat,\n\t\tchangeCurrentMWStat,\n\t\tactiveMW,\n\t\ttoggleActiveMW,\n\t\tstoreMasterwork,\n\n\t\tswapTitle,\n\t} = props;\n\n\tif (isY1) {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<span className=\"uppercase tracked-wide underline\">Masterwork</span>\n\t\t\t\t<span>Under construction.</span>\n\t\t\t</React.Fragment>\n\t\t)\n\t} else {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<span className=\"uppercase tracked-wide underline\">Masterwork</span>\n\t\t\t\t<div className=\"masterwork-sections\">\n\t\t\t\t\t{\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<label htmlFor=\"mw-stat\">\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tname=\"mw-stat\" \n\t\t\t\t\t\t\t\t\tonChange={ changeCurrentMWStat } \n\t\t\t\t\t\t\t\t\tvalue={ currentMWStat }>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tObject.keys(masterworks).map(mwStat => {\n\t\t\t\t\t\t\t\t\t\t\tif (masterworks[mwStat].active) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn <option key={mwStat} value={mwStat}>{ swapTitle(mwStat) }</option>\n\t\t\t\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<ul className=\"masterwork-list\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tmasterworks[currentMWStat].benefits.map(mw => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Route key={mw.hash} render={({ history }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={ \n\t\t\t\t\t\t\t\t\t\t\t\t\tactiveMW.hash === mw.hash ? 'node active' : 'node' \n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tstoreMasterwork(mw); \n\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleActiveMW(mw);\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet builtId = hashids.encode(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tweapon.hash, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tweapon.perks.slotOne.hash, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tweapon.perks.slotTwo.hash, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tweapon.perks.slotThree.hash, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tweapon.perks.slotFour.hash, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tweapon.mod.hash, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactiveMW.hash !== mw.hash ? mw.hash : 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\thistory.push(`/w/${ builtId }`); \n\t\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mw-icon\" data-for={`getContent-${mw.hash}`} data-tip><img src={`https://bungie.net${mw.displayProperties.icon}`} alt=\"\"/></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip \n\t\t\t\t\t\t\t\t\t\t\t\t\t\thash={ mw.hash }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={ mw.displayProperties.name }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubtitle={ mw.itemTypeDisplayName }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdescription={ mw.displayProperties.description }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstats={ mw.investmentStats.length > 0 ? mw.investmentStats : null }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t)} />\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n}\n\nconst Catalyst = (props) => {\n\tconst {\n\t\tcatalyst,\n\t\tactiveMW,\n\t\ttoggleActiveMW,\n\t\tstoreMasterwork,\n\t} = props;\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<span className=\"uppercase tracked-wide underline\">Catalyst</span>\n\t\t\t<div className=\"masterwork-sections\">\n\t\t\t\t<ul className=\"masterwork-list\">\n\t\t\t\t\t{\n\t\t\t\t\t\tcatalyst.map(mw => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li key={mw.hash}\n\t\t\t\t\t\t\t\t\tclassName={ \n\t\t\t\t\t\t\t\t\t\tactiveMW.hash === mw.hash ? 'node active' : 'node' \n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={ () => { \n\t\t\t\t\t\t\t\t\t\tstoreMasterwork(mw); \n\t\t\t\t\t\t\t\t\t\ttoggleActiveMW(mw);\n\t\t\t\t\t\t\t\t} }>\n\t\t\t\t\t\t\t\t\t<div className=\"mw-icon\">\n\t\t\t\t\t\t\t\t\t\t<img src={`https://bungie.net${mw.displayProperties.icon}`} alt=\"\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/* <Tooltip \n\t\t\t\t\t\t\t\t\t\ttitle={ mw.displayProperties.name }\n\t\t\t\t\t\t\t\t\t\tsubtitle={ mw.itemTypeDisplayName }\n\t\t\t\t\t\t\t\t\t\tdescription={ mw.displayProperties.description }\n\t\t\t\t\t\t\t\t\t\tstats={ mw.investmentStats.length > 0 ? mw.investmentStats : null }\n\t\t\t\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</React.Fragment>\n\t)\n}\n\nconst mapStateToProps = state => ({\n\tmanifest: state.manifest,\n\tweapon: state.weapon,\n\ttooltip: state.tooltip,\n});\n\nexport default connect(mapStateToProps, {\n\tstoreMasterwork\n})(Masterworks);"]},"metadata":{},"sourceType":"module"}