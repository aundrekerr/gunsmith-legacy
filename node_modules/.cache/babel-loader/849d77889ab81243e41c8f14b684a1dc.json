{"ast":null,"code":"var _jsxFileName = \"/Users/aundrekerr/Projects/React2019/gunsmith3/src/components/Search/index.js\";\nimport React, { Component } from 'react'; // import PropTypes from 'prop-types';\n\nimport { connect } from 'react-redux';\nimport SearchInput from './SearchInput'; // import { storeWeapon, storePerks } from './../../actions/weaponActions';\n// import SearchFilter from './SearchFilter';\n\nclass Search extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      const suggestions = this.state.weaponList;\n      const userInput = e.currentTarget.value;\n      const filteredSuggestions = suggestions.filter(suggestion => suggestion.displayProperties.name.toLowerCase().indexOf(userInput.toLowerCase()) > -1);\n      this.setState({\n        activeSuggestion: 0,\n        filteredSuggestions,\n        showSuggestions: true,\n        userInput: e.currentTarget.value\n      });\n    };\n\n    this.onClick = hash => {\n      this.props.storeWeapon(hash);\n      this.props.storePerks(null, 0);\n      this.props.storePerks(null, 1);\n      this.props.storePerks(null, 2);\n      this.props.storePerks(null, 3);\n      this.setState({\n        activeSuggestion: 0,\n        filteredSuggestions: [],\n        showSuggestions: false,\n        userInput: ''\n      });\n    };\n\n    this.state = {\n      weaponList: [],\n      filteredSuggestions: [],\n      showSuggestions: false,\n      userInput: '',\n      manifestLoaded: false,\n      filterView: 'hide',\n      toggleFilter: () => {\n        this.setState(({\n          filterView\n        }) => ({\n          filterView: filterView === 'hide' ? 'show' : 'hide'\n        }));\n      }\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    const manifest = this.props.manifest;\n\n    if (Object.keys(manifest).length !== 0 && manifest !== prevProps.manifest) {\n      let weaponList = []; // All Weapons\n\n      Object.keys(manifest.DestinyInventoryItemDefinition).map(weapon => {\n        return manifest.DestinyInventoryItemDefinition[weapon].itemType === 3 ? weaponList.push(manifest.DestinyInventoryItemDefinition[weapon]) : null;\n      }); // const filters = nextProps.filters;\n      // Weapon Rarity\n      // if ( filters.rarity ) {\n      // \tweaponList = weaponList.filter(weapon => {\n      // \t\treturn weapon.inventory.tierTypeHash === filters.rarity \n      // \t})\n      // }\n      // // Weapon Type\n      // if ( filters.weaponType ) {\n      // \tweaponList = weaponList.filter(weapon => {\n      // \t\treturn weapon.itemSubType === filters.weaponType \n      // \t})\n      // }\n      // // Damage Type\n      // if ( filters.damage ) {\n      // \tweaponList = weaponList.filter(weapon => {\n      // \t\treturn weapon.defaultDamageTypeHash === filters.damage \n      // \t})\n      // }\n\n      this.setState({\n        manifestLoaded: true,\n        weaponList: weaponList,\n        filteredSuggestions: weaponList\n      });\n    }\n  }\n\n  render() {\n    const onChange = this.onChange,\n          _this$state = this.state,\n          weaponList = _this$state.weaponList,\n          filteredSuggestions = _this$state.filteredSuggestions,\n          showSuggestions = _this$state.showSuggestions,\n          userInput = _this$state.userInput,\n          manifestLoaded = _this$state.manifestLoaded,\n          filterView = _this$state.filterView,\n          toggleFilter = _this$state.toggleFilter,\n          manifest = this.props.manifest;\n    let suggestionsListComponent;\n\n    if (showSuggestions && userInput) {\n      if (filteredSuggestions.length) {\n        suggestionsListComponent = React.createElement(\"ul\", {\n          className: \"weapon-list__suggestions\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, filteredSuggestions.map(suggestion => {\n          return React.createElement(\"li\", {\n            key: suggestion.hash,\n            onClick: () => {\n              // this.props.setActiveWeapon(suggestion.hash); \n              this.onClick(suggestion.hash);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 128\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"weapon-list__item-icon\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 135\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: \"https://www.bungie.net\".concat(manifest.DestinyInventoryItemDefinition[suggestion.hash].displayProperties.icon),\n            alt: \"\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 136\n            },\n            __self: this\n          })), React.createElement(\"div\", {\n            className: \"weapon-list__item-title\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 138\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"weapon-list__item-name\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 139\n            },\n            __self: this\n          }, manifest.DestinyInventoryItemDefinition[suggestion.hash].displayProperties.name), React.createElement(\"span\", {\n            className: \"weapon-list__item-type\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 140\n            },\n            __self: this\n          }, manifest.DestinyInventoryItemDefinition[suggestion.hash].itemTypeDisplayName)));\n        }));\n      } else {\n        suggestionsListComponent = React.createElement(\"ul\", {\n          className: \"weapon-list__suggestions no-suggestion\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, React.createElement(\"em\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }, \"No weapon found. Use your light.\"));\n      }\n    }\n\n    return React.createElement(\"div\", {\n      className: \"search__wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(SearchInput, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }));\n  }\n\n} // Autocomplete.propTypes = {\n// \tstoreWeapon: PropTypes.func.isRequired,\n// \tstorePerks: PropTypes.func.isRequired\n// };\n\n\nconst mapStateToProps = state => ({\n  manifest: state.manifest,\n  filters: state.filters\n});\n\nexport default connect(mapStateToProps, {\n  storeWeapon,\n  storePerks\n})(Autocomplete);","map":{"version":3,"sources":["/Users/aundrekerr/Projects/React2019/gunsmith3/src/components/Search/index.js"],"names":["React","Component","connect","SearchInput","Search","constructor","props","onChange","e","suggestions","state","weaponList","userInput","currentTarget","value","filteredSuggestions","filter","suggestion","displayProperties","name","toLowerCase","indexOf","setState","activeSuggestion","showSuggestions","onClick","hash","storeWeapon","storePerks","manifestLoaded","filterView","toggleFilter","componentDidUpdate","prevProps","manifest","Object","keys","length","DestinyInventoryItemDefinition","map","weapon","itemType","push","render","suggestionsListComponent","icon","itemTypeDisplayName","mapStateToProps","filters","Autocomplete"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CACA;;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,WAAP,MAAwB,eAAxB,C,CACA;AACA;;AAEA,MAAMC,MAAN,SAAqBH,SAArB,CAA+B;AAC9BI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;;AADkB,SA8DnBC,QA9DmB,GA8DRC,CAAC,IAAI;AACf,YAAMC,WAAW,GAAG,KAAKC,KAAL,CAAWC,UAA/B;AACA,YAAMC,SAAS,GAAGJ,CAAC,CAACK,aAAF,CAAgBC,KAAlC;AAEA,YAAMC,mBAAmB,GAAGN,WAAW,CAACO,MAAZ,CAC3BC,UAAU,IAAKA,UAAU,CAACC,iBAAX,CAA6BC,IAA9B,CAAoCC,WAApC,GAAkDC,OAAlD,CAA0DT,SAAS,CAACQ,WAAV,EAA1D,IAAqF,CAAC,CADzE,CAA5B;AAIA,WAAKE,QAAL,CAAc;AACbC,QAAAA,gBAAgB,EAAE,CADL;AAEbR,QAAAA,mBAFa;AAGbS,QAAAA,eAAe,EAAE,IAHJ;AAIbZ,QAAAA,SAAS,EAAEJ,CAAC,CAACK,aAAF,CAAgBC;AAJd,OAAd;AAMA,KA5EkB;;AAAA,SA8EnBW,OA9EmB,GA8ERC,IAAD,IAAU;AACnB,WAAKpB,KAAL,CAAWqB,WAAX,CAAuBD,IAAvB;AACA,WAAKpB,KAAL,CAAWsB,UAAX,CAAsB,IAAtB,EAA4B,CAA5B;AACA,WAAKtB,KAAL,CAAWsB,UAAX,CAAsB,IAAtB,EAA4B,CAA5B;AACA,WAAKtB,KAAL,CAAWsB,UAAX,CAAsB,IAAtB,EAA4B,CAA5B;AACA,WAAKtB,KAAL,CAAWsB,UAAX,CAAsB,IAAtB,EAA4B,CAA5B;AAEA,WAAKN,QAAL,CAAc;AACbC,QAAAA,gBAAgB,EAAE,CADL;AAEbR,QAAAA,mBAAmB,EAAE,EAFR;AAGbS,QAAAA,eAAe,EAAE,KAHJ;AAIbZ,QAAAA,SAAS,EAAE;AAJE,OAAd;AAMA,KA3FkB;;AAGlB,SAAKF,KAAL,GAAa;AACZC,MAAAA,UAAU,EAAE,EADA;AAEZI,MAAAA,mBAAmB,EAAE,EAFT;AAGZS,MAAAA,eAAe,EAAE,KAHL;AAIZZ,MAAAA,SAAS,EAAE,EAJC;AAKZiB,MAAAA,cAAc,EAAE,KALJ;AAMZC,MAAAA,UAAU,EAAE,MANA;AAOZC,MAAAA,YAAY,EAAE,MAAM;AACnB,aAAKT,QAAL,CAAc,CAAC;AAAEQ,UAAAA;AAAF,SAAD,MAAqB;AAClCA,UAAAA,UAAU,EAAEA,UAAU,KAAK,MAAf,GAAwB,MAAxB,GAAiC;AADX,SAArB,CAAd;AAGA;AAXW,KAAb;AAaA;;AAEDE,EAAAA,kBAAkB,CAACC,SAAD,EAAY;AAAA,UACrBC,QADqB,GACR,KAAK5B,KADG,CACrB4B,QADqB;;AAG7B,QAAKC,MAAM,CAACC,IAAP,CAAaF,QAAb,EAAwBG,MAAxB,KAAmC,CAAnC,IAAwCH,QAAQ,KAAKD,SAAS,CAACC,QAApE,EAA8E;AAC7E,UAAIvB,UAAU,GAAG,EAAjB,CAD6E,CAG7E;;AACAwB,MAAAA,MAAM,CAACC,IAAP,CAAYF,QAAQ,CAACI,8BAArB,EAAqDC,GAArD,CAAyDC,MAAM,IAAI;AAClE,eAAON,QAAQ,CAACI,8BAAT,CAAwCE,MAAxC,EAAgDC,QAAhD,KAA6D,CAA7D,GACJ9B,UAAU,CAAC+B,IAAX,CAAgBR,QAAQ,CAACI,8BAAT,CAAwCE,MAAxC,CAAhB,CADI,GAEJ,IAFH;AAGA,OAJD,EAJ6E,CAU7E;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAKlB,QAAL,CAAc;AACbO,QAAAA,cAAc,EAAE,IADH;AAEblB,QAAAA,UAAU,EAAEA,UAFC;AAGbI,QAAAA,mBAAmB,EAAEJ;AAHR,OAAd;AAKA;AACD;;AAiCDgC,EAAAA,MAAM,GAAG;AAAA,UAEPpC,QAFO,GAeJ,IAfI,CAEPA,QAFO;AAAA,wBAeJ,IAfI,CAGPG,KAHO;AAAA,UAINC,UAJM,eAINA,UAJM;AAAA,UAKNI,mBALM,eAKNA,mBALM;AAAA,UAMNS,eANM,eAMNA,eANM;AAAA,UAONZ,SAPM,eAONA,SAPM;AAAA,UAQNiB,cARM,eAQNA,cARM;AAAA,UASNC,UATM,eASNA,UATM;AAAA,UAUNC,YAVM,eAUNA,YAVM;AAAA,UAaNG,QAbM,GAeJ,IAfI,CAYP5B,KAZO,CAaN4B,QAbM;AAiBR,QAAIU,wBAAJ;;AAEA,QAAIpB,eAAe,IAAIZ,SAAvB,EAAkC;AACjC,UAAIG,mBAAmB,CAACsB,MAAxB,EAAgC;AAC/BO,QAAAA,wBAAwB,GACvB;AAAI,UAAA,SAAS,EAAC,0BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAEE7B,mBAAmB,CAACwB,GAApB,CAAyBtB,UAAD,IAAgB;AACvC,iBACC;AACC,YAAA,GAAG,EAAGA,UAAU,CAACS,IADlB;AAEC,YAAA,OAAO,EAAE,MAAM;AACd;AACA,mBAAKD,OAAL,CAAaR,UAAU,CAACS,IAAxB;AACA,aALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAOC;AAAK,YAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACC;AAAK,YAAA,GAAG,kCAA2BQ,QAAQ,CAACI,8BAAT,CAAwCrB,UAAU,CAACS,IAAnD,EAAyDR,iBAAzD,CAA2E2B,IAAtG,CAAR;AAAsH,YAAA,GAAG,EAAC,EAA1H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,CAPD,EAUC;AAAK,YAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACC;AAAM,YAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA2CX,QAAQ,CAACI,8BAAT,CAAwCrB,UAAU,CAACS,IAAnD,EAAyDR,iBAAzD,CAA2EC,IAAtH,CADD,EAEC;AAAM,YAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA2Ce,QAAQ,CAACI,8BAAT,CAAwCrB,UAAU,CAACS,IAAnD,EAAyDoB,mBAApG,CAFD,CAVD,CADD;AAiBA,SAlBD,CAFF,CADD;AAyBA,OA1BD,MA0BO;AACNF,QAAAA,wBAAwB,GACvB;AAAI,UAAA,SAAS,EAAC,wCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CADD,CADD;AAKA;AACD;;AAED,WACC;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CADD;AAKA;;AA1J6B,C,CA6J/B;AACA;AACA;AACA;;;AAEA,MAAMG,eAAe,GAAGrC,KAAK,KAAK;AACjCwB,EAAAA,QAAQ,EAAExB,KAAK,CAACwB,QADiB;AAEjCc,EAAAA,OAAO,EAAEtC,KAAK,CAACsC;AAFkB,CAAL,CAA7B;;AAKA,eAAe9C,OAAO,CAAC6C,eAAD,EAAkB;AAAEpB,EAAAA,WAAF;AAAeC,EAAAA;AAAf,CAAlB,CAAP,CAAsDqB,YAAtD,CAAf","sourcesContent":["import React, { Component } from 'react';\n// import PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport SearchInput from './SearchInput';\n// import { storeWeapon, storePerks } from './../../actions/weaponActions';\n// import SearchFilter from './SearchFilter';\n\nclass Search extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tweaponList: [],\n\t\t\tfilteredSuggestions: [],\n\t\t\tshowSuggestions: false,\n\t\t\tuserInput: '',\n\t\t\tmanifestLoaded: false,\n\t\t\tfilterView: 'hide',\n\t\t\ttoggleFilter: () => {\n\t\t\t\tthis.setState(({ filterView }) => ({\n\t\t\t\t\tfilterView: filterView === 'hide' ? 'show' : 'hide'\n\t\t\t\t}))\n\t\t\t},\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tconst { manifest } = this.props;\n\n\t\tif ( Object.keys((manifest)).length !== 0 && manifest !== prevProps.manifest) {\n\t\t\tlet weaponList = [];\n\t\t\t\n\t\t\t// All Weapons\n\t\t\tObject.keys(manifest.DestinyInventoryItemDefinition).map(weapon => {\n\t\t\t\treturn manifest.DestinyInventoryItemDefinition[weapon].itemType === 3\n\t\t\t\t\t? weaponList.push(manifest.DestinyInventoryItemDefinition[weapon])\n\t\t\t\t\t: null\n\t\t\t})\n\n\t\t\t// const filters = nextProps.filters;\n\n\t\t\t// Weapon Rarity\n\t\t\t// if ( filters.rarity ) {\n\t\t\t// \tweaponList = weaponList.filter(weapon => {\n\t\t\t// \t\treturn weapon.inventory.tierTypeHash === filters.rarity \n\t\t\t// \t})\n\t\t\t// }\n\n\t\t\t// // Weapon Type\n\t\t\t// if ( filters.weaponType ) {\n\t\t\t// \tweaponList = weaponList.filter(weapon => {\n\t\t\t// \t\treturn weapon.itemSubType === filters.weaponType \n\t\t\t// \t})\n\t\t\t// }\n\n\t\t\t// // Damage Type\n\t\t\t// if ( filters.damage ) {\n\t\t\t// \tweaponList = weaponList.filter(weapon => {\n\t\t\t// \t\treturn weapon.defaultDamageTypeHash === filters.damage \n\t\t\t// \t})\n\t\t\t// }\n\n\t\t\tthis.setState({ \n\t\t\t\tmanifestLoaded: true,\n\t\t\t\tweaponList: weaponList,\n\t\t\t\tfilteredSuggestions: weaponList\n\t\t\t})\n\t\t}\n\t}\n\n\tonChange = e => {\n\t\tconst suggestions = this.state.weaponList;\n\t\tconst userInput = e.currentTarget.value;\n\n\t\tconst filteredSuggestions = suggestions.filter(\n\t\t\tsuggestion => (suggestion.displayProperties.name).toLowerCase().indexOf(userInput.toLowerCase()) > -1\n\t\t);\n\n\t\tthis.setState({\n\t\t\tactiveSuggestion: 0,\n\t\t\tfilteredSuggestions,\n\t\t\tshowSuggestions: true,\n\t\t\tuserInput: e.currentTarget.value\n\t\t})\n\t}\n\n\tonClick = (hash) => {\n\t\tthis.props.storeWeapon(hash);\t\n\t\tthis.props.storePerks(null, 0);\n\t\tthis.props.storePerks(null, 1);\n\t\tthis.props.storePerks(null, 2);\n\t\tthis.props.storePerks(null, 3);\n\n\t\tthis.setState({\n\t\t\tactiveSuggestion: 0,\n\t\t\tfilteredSuggestions: [],\n\t\t\tshowSuggestions: false,\n\t\t\tuserInput: ''\n\t\t})\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tonChange,\n\t\t\tstate: {\n\t\t\t\tweaponList,\n\t\t\t\tfilteredSuggestions,\n\t\t\t\tshowSuggestions,\n\t\t\t\tuserInput,\n\t\t\t\tmanifestLoaded,\n\t\t\t\tfilterView, \n\t\t\t\ttoggleFilter\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tmanifest\n\t\t\t},\n\t\t} = this;\n\n\t\tlet suggestionsListComponent;\n\n\t\tif (showSuggestions && userInput) {\n\t\t\tif (filteredSuggestions.length) {\n\t\t\t\tsuggestionsListComponent = (\n\t\t\t\t\t<ul className=\"weapon-list__suggestions\">\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilteredSuggestions.map((suggestion) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<li \n\t\t\t\t\t\t\t\t\t\tkey={ suggestion.hash } \n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t// this.props.setActiveWeapon(suggestion.hash); \n\t\t\t\t\t\t\t\t\t\t\tthis.onClick(suggestion.hash)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className=\"weapon-list__item-icon\">\n\t\t\t\t\t\t\t\t\t\t\t<img src={`https://www.bungie.net${manifest.DestinyInventoryItemDefinition[suggestion.hash].displayProperties.icon}`} alt=\"\"/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"weapon-list__item-title\">\n\t\t\t\t\t\t\t\t\t\t\t<span className='weapon-list__item-name'>{ manifest.DestinyInventoryItemDefinition[suggestion.hash].displayProperties.name }</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className='weapon-list__item-type'>{ manifest.DestinyInventoryItemDefinition[suggestion.hash].itemTypeDisplayName }</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</ul>\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\tsuggestionsListComponent = (\n\t\t\t\t\t<ul className=\"weapon-list__suggestions no-suggestion\">\n\t\t\t\t\t\t<em>No weapon found. Use your light.</em>\n\t\t\t\t\t</ul>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn (\n\t\t\t<div className=\"search__wrapper\">\n\t\t\t\t<SearchInput />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\n// Autocomplete.propTypes = {\n// \tstoreWeapon: PropTypes.func.isRequired,\n// \tstorePerks: PropTypes.func.isRequired\n// };\n\nconst mapStateToProps = state => ({\n\tmanifest: state.manifest,\n\tfilters: state.filters,\n});\n\nexport default connect(mapStateToProps, { storeWeapon, storePerks })(Autocomplete);"]},"metadata":{},"sourceType":"module"}