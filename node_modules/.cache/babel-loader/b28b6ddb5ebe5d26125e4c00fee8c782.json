{"ast":null,"code":"let manifest;\n\nfunction containsOnly(array1, array2) {\n  return array2.every(elem => array1.includes(elem));\n}\n\nexport function buildPerks(theManifest, weapon) {\n  console.log('----- Building perks. -----'); // Set up inital variables.\n\n  manifest = theManifest;\n  const itemDef = manifest.DestinyInventoryItemDefinition[weapon.hash];\n  const socketEntries = itemDef.sockets.socketEntries; // Item that will be returned, maximum of 4 perk slots. Not a good \n  // idea since a 5-perk weapon could come later on.\n\n  let perkList = [[], [], [], [], []];\n  let slotCheck = 0; // Map through slots to find ones that are genuine perks.\n\n  socketEntries.map(socket => {\n    // Check plug sources to filter out MWs, mods, shaders, etc.\n    if (socket.plugSources === 2) {\n      // console.log(socket)\n      for (let i = 0; i < socket.reusablePlugItems.length; i++) {\n        const plugItemHash = socket.reusablePlugItems[i].plugItemHash;\n        const plugItemsCategories = manifest.DestinyInventoryItemDefinition[plugItemHash].itemCategoryHashes;\n\n        if (plugItemsCategories.includes(59) && plugItemsCategories.length > 1) {\n          // console.log(socket.reusablePlugItems[i])\n          console.log(manifest.DestinyInventoryItemDefinition[plugItemHash].displayProperties.name);\n        }\n      }\n\n      console.log('-'); // socket.reusablePlugItems.map(plug => {\n      // \tconst plugItemsCategories = manifest.DestinyInventoryItemDefinition[plug.plugItemHash].itemCategoryHashes;\n      // \t// Filter out Kill Trackers.\n      // \tif (plugItemsCategories.includes(59) && plugItemsCategories.length > 1) {\n      // \t\tconsole.log(socket.reusablePlugItems)\n      // \t\tconsole.log(manifest.DestinyInventoryItemDefinition[plug.plugItemHash].displayProperties.name)\n      // \t\t// for(let i = 0; i < socket.reusablePlugItems.length; i++){\n      // \t\t// \t// perkList[slotCheck].push(socket.reusablePlugItems[i].plugItemHash) \n      // \t\t// \t// console.log(socket.reusablePlugItems[i].plugItemHash, plug.plugItemHash)\n      // \t\t// }\n      // \t\t// console.log('-', slotCheck);\n      // \t\t// slotCheck++;\n      // \t}\n      // })\n    }\n  });\n  console.log(perkList); // console.log(perkList.map(perk => manifest.DestinyInventoryItemDefinition[perk[0]].displayProperties.name ))\n}","map":{"version":3,"sources":["/Users/aundrekerr/Projects/React2019/gunsmith3/src/utils/perks.js"],"names":["manifest","containsOnly","array1","array2","every","elem","includes","buildPerks","theManifest","weapon","console","log","itemDef","DestinyInventoryItemDefinition","hash","socketEntries","sockets","perkList","slotCheck","map","socket","plugSources","i","reusablePlugItems","length","plugItemHash","plugItemsCategories","itemCategoryHashes","displayProperties","name"],"mappings":"AAAA,IAAIA,QAAJ;;AAEA,SAASC,YAAT,CAAsBC,MAAtB,EAA8BC,MAA9B,EAAqC;AACpC,SAAOA,MAAM,CAACC,KAAP,CAAaC,IAAI,IAAIH,MAAM,CAACI,QAAP,CAAgBD,IAAhB,CAArB,CAAP;AACA;;AAED,OAAO,SAASE,UAAT,CACNC,WADM,EAENC,MAFM,EAGL;AACDC,EAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EADC,CAGD;;AACAX,EAAAA,QAAQ,GAAGQ,WAAX;AACA,QAAMI,OAAO,GAAGZ,QAAQ,CAACa,8BAAT,CAAwCJ,MAAM,CAACK,IAA/C,CAAhB;AACA,QAAMC,aAAa,GAAGH,OAAO,CAACI,OAAR,CAAgBD,aAAtC,CANC,CAQD;AACA;;AACA,MAAIE,QAAQ,GAAG,CACd,EADc,EAEd,EAFc,EAGd,EAHc,EAId,EAJc,EAKd,EALc,CAAf;AAOA,MAAIC,SAAS,GAAG,CAAhB,CAjBC,CAmBD;;AACAH,EAAAA,aAAa,CAACI,GAAd,CAAkBC,MAAM,IAAI;AAE3B;AACA,QAAIA,MAAM,CAACC,WAAP,KAAuB,CAA3B,EAA8B;AAG7B;AAEA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,MAAM,CAACG,iBAAP,CAAyBC,MAA7C,EAAqDF,CAAC,EAAtD,EAA0D;AACzD,cAAMG,YAAY,GAAGL,MAAM,CAACG,iBAAP,CAAyBD,CAAzB,EAA4BG,YAAjD;AACA,cAAMC,mBAAmB,GAAG1B,QAAQ,CAACa,8BAAT,CAAwCY,YAAxC,EAAsDE,kBAAlF;;AAEA,YAAID,mBAAmB,CAACpB,QAApB,CAA6B,EAA7B,KAAoCoB,mBAAmB,CAACF,MAApB,GAA6B,CAArE,EAAwE;AACvE;AACAd,UAAAA,OAAO,CAACC,GAAR,CAAYX,QAAQ,CAACa,8BAAT,CAAwCY,YAAxC,EAAsDG,iBAAtD,CAAwEC,IAApF;AACA;AACD;;AACDnB,MAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ,EAd6B,CAkB7B;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,GAtCD;AAwCAD,EAAAA,OAAO,CAACC,GAAR,CAAYM,QAAZ,EA5DC,CA8DD;AACA","sourcesContent":["let manifest;\n\nfunction containsOnly(array1, array2){\n\treturn array2.every(elem => array1.includes(elem))\n}\n\nexport function buildPerks(\n\ttheManifest,\n\tweapon\n) {\n\tconsole.log('----- Building perks. -----');\n\n\t// Set up inital variables.\n\tmanifest = theManifest;\n\tconst itemDef = manifest.DestinyInventoryItemDefinition[weapon.hash];\n\tconst socketEntries = itemDef.sockets.socketEntries;\n\n\t// Item that will be returned, maximum of 4 perk slots. Not a good \n\t// idea since a 5-perk weapon could come later on.\n\tlet perkList = [\n\t\t[],\n\t\t[],\n\t\t[],\n\t\t[],\n\t\t[]\n\t];\n\tlet slotCheck = 0;\n\t\n\t// Map through slots to find ones that are genuine perks.\n\tsocketEntries.map(socket => {\n\n\t\t// Check plug sources to filter out MWs, mods, shaders, etc.\n\t\tif (socket.plugSources === 2) {\n\n\t\t\t\n\t\t\t// console.log(socket)\n\n\t\t\tfor (let i = 0; i < socket.reusablePlugItems.length; i++) {\n\t\t\t\tconst plugItemHash = socket.reusablePlugItems[i].plugItemHash;\n\t\t\t\tconst plugItemsCategories = manifest.DestinyInventoryItemDefinition[plugItemHash].itemCategoryHashes;\n\n\t\t\t\tif (plugItemsCategories.includes(59) && plugItemsCategories.length > 1) {\n\t\t\t\t\t// console.log(socket.reusablePlugItems[i])\n\t\t\t\t\tconsole.log(manifest.DestinyInventoryItemDefinition[plugItemHash].displayProperties.name)\n\t\t\t\t}\n\t\t\t}\n\t\t\tconsole.log('-')\n\n\n\n\t\t\t// socket.reusablePlugItems.map(plug => {\n\t\t\t// \tconst plugItemsCategories = manifest.DestinyInventoryItemDefinition[plug.plugItemHash].itemCategoryHashes;\n\n\t\t\t// \t// Filter out Kill Trackers.\n\t\t\t// \tif (plugItemsCategories.includes(59) && plugItemsCategories.length > 1) {\n\t\t\t// \t\tconsole.log(socket.reusablePlugItems)\n\t\t\t// \t\tconsole.log(manifest.DestinyInventoryItemDefinition[plug.plugItemHash].displayProperties.name)\n\t\t\t// \t\t// for(let i = 0; i < socket.reusablePlugItems.length; i++){\n\t\t\t// \t\t// \t// perkList[slotCheck].push(socket.reusablePlugItems[i].plugItemHash) \n\n\t\t\t// \t\t// \t// console.log(socket.reusablePlugItems[i].plugItemHash, plug.plugItemHash)\n\t\t\t// \t\t// }\n\t\t\t// \t\t// console.log('-', slotCheck);\n\t\t\t// \t\t// slotCheck++;\n\t\t\t// \t}\n\t\t\t// })\n\t\t}\n\t});\n\n\tconsole.log(perkList)\n\n\t// console.log(perkList.map(perk => manifest.DestinyInventoryItemDefinition[perk[0]].displayProperties.name ))\n}\n"]},"metadata":{},"sourceType":"module"}