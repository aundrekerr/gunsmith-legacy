{"ast":null,"code":"var _jsxFileName = \"/Users/aundrekerr/Projects/React2019/gunsmith3/src/components/Search/Suggestions.js\";\nimport React, { Component } from 'react'; // import PropTypes from 'prop-types';\n\nimport { connect } from 'react-redux'; // import { storeWeapon, storePerks } from './../../actions/weaponActions';\n\nimport SearchFilter from './SearchFilter'; // import yearTwo from './../../utils/weaponSets/yearTwo.js';\n// const weaponList = [];\n// yearTwo.forEach(set => {\n// \t(set.weapons).map((weapon) => {\n// \t\treturn weaponList.push(weapon);\n// \t})\n// });\n\nclass Autocomplete extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onClick = hash => {\n      // this.props.storeWeapon(hash);\t\n      // this.props.storePerks(null, 0);\n      // this.props.storePerks(null, 1);\n      // this.props.storePerks(null, 2);\n      // this.props.storePerks(null, 3);\n      this.setState({\n        activeSuggestion: 0,\n        filteredSuggestions: [],\n        showSuggestions: false,\n        userInput: ''\n      });\n    };\n\n    this.state = {\n      weaponList: [],\n      filteredSuggestions: [],\n      showSuggestions: false,\n      userInput: '',\n      manifestLoaded: false,\n      filterView: 'hide',\n      toggleFilter: () => {\n        this.setState(({\n          filterView\n        }) => ({\n          filterView: filterView === 'hide' ? 'show' : 'hide'\n        }));\n      }\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (Object.keys(nextProps.manifest).length !== 0) {\n      const manifest = nextProps.manifest.manifest;\n      let weaponList = []; // All Weapons\n\n      Object.keys(nextProps.manifest.DestinyInventoryItemDefinition).map(weapon => {\n        return nextProps.manifest.DestinyInventoryItemDefinition[weapon].itemType === 3 ? weaponList.push(nextProps.manifest.DestinyInventoryItemDefinition[weapon]) : null;\n      });\n      const filters = nextProps.filters; // Weapon Rarity\n\n      if (filters.rarity) {\n        weaponList = weaponList.filter(weapon => {\n          return weapon.inventory.tierTypeHash === filters.rarity;\n        });\n      } // Weapon Type\n\n\n      if (filters.weaponType) {\n        weaponList = weaponList.filter(weapon => {\n          return weapon.itemSubType === filters.weaponType;\n        });\n      } // Damage Type\n\n\n      if (filters.damage) {\n        weaponList = weaponList.filter(weapon => {\n          return weapon.defaultDamageTypeHash === filters.damage;\n        });\n      }\n\n      this.setState({\n        manifestLoaded: true,\n        weaponList: weaponList,\n        filteredSuggestions: weaponList\n      });\n    }\n  }\n\n  render() {\n    const _this$state = this.state,\n          weaponList = _this$state.weaponList,\n          filteredSuggestions = _this$state.filteredSuggestions,\n          showSuggestions = _this$state.showSuggestions,\n          userInput = _this$state.userInput,\n          manifest = _this$state.props.manifest;\n    let suggestionsListComponent;\n\n    if (showSuggestions && userInput) {\n      if (filteredSuggestions.length) {\n        suggestionsListComponent = React.createElement(\"ul\", {\n          className: \"weapon-list__suggestions\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, filteredSuggestions.map(suggestion => {\n          return React.createElement(\"li\", {\n            key: suggestion.hash,\n            onClick: () => {\n              // this.props.setActiveWeapon(suggestion.hash); \n              this.onClick(suggestion.hash);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"weapon-list__item-icon\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 121\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: \"https://www.bungie.net\".concat(manifest.DestinyInventoryItemDefinition[suggestion.hash].displayProperties.icon),\n            alt: \"\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 122\n            },\n            __self: this\n          })), React.createElement(\"div\", {\n            className: \"weapon-list__item-title\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 124\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"weapon-list__item-name\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125\n            },\n            __self: this\n          }, manifest.DestinyInventoryItemDefinition[suggestion.hash].displayProperties.name), React.createElement(\"span\", {\n            className: \"weapon-list__item-type\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126\n            },\n            __self: this\n          }, manifest.DestinyInventoryItemDefinition[suggestion.hash].itemTypeDisplayName)));\n        }));\n      } else {\n        suggestionsListComponent = React.createElement(\"ul\", {\n          className: \"weapon-list__suggestions no-suggestion\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, React.createElement(\"em\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, \"No weapon found. Use your light.\"));\n      }\n    }\n\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, suggestionsListComponent);\n  }\n\n} // Autocomplete.propTypes = {\n// \tstoreWeapon: PropTypes.func.isRequired,\n// \tstorePerks: PropTypes.func.isRequired\n// };\n\n\nconst mapStateToProps = state => ({\n  manifest: state.manifest,\n  filters: state.filters\n});\n\nexport default connect(mapStateToProps, {})(Autocomplete);","map":{"version":3,"sources":["/Users/aundrekerr/Projects/React2019/gunsmith3/src/components/Search/Suggestions.js"],"names":["React","Component","connect","SearchFilter","Autocomplete","constructor","props","onClick","hash","setState","activeSuggestion","filteredSuggestions","showSuggestions","userInput","state","weaponList","manifestLoaded","filterView","toggleFilter","componentWillReceiveProps","nextProps","Object","keys","manifest","length","DestinyInventoryItemDefinition","map","weapon","itemType","push","filters","rarity","filter","inventory","tierTypeHash","weaponType","itemSubType","damage","defaultDamageTypeHash","render","suggestionsListComponent","suggestion","displayProperties","icon","name","itemTypeDisplayName","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n// import PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n// import { storeWeapon, storePerks } from './../../actions/weaponActions';\nimport SearchFilter from './SearchFilter';\n\n// import yearTwo from './../../utils/weaponSets/yearTwo.js';\n// const weaponList = [];\n// yearTwo.forEach(set => {\n// \t(set.weapons).map((weapon) => {\n// \t\treturn weaponList.push(weapon);\n// \t})\n// });\n\nclass Autocomplete extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tweaponList: [],\n\t\t\tfilteredSuggestions: [],\n\t\t\tshowSuggestions: false,\n\t\t\tuserInput: '',\n\t\t\tmanifestLoaded: false,\n\t\t\tfilterView: 'hide',\n\t\t\ttoggleFilter: () => {\n\t\t\t\tthis.setState(({ filterView }) => ({\n\t\t\t\t\tfilterView: filterView === 'hide' ? 'show' : 'hide'\n\t\t\t\t}))\n\t\t\t},\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif ( Object.keys((nextProps.manifest)).length !== 0 ) {\n\t\t\tconst { manifest } = nextProps.manifest;\n\t\t\tlet weaponList = [];\n\t\t\t\n\t\t\t// All Weapons\n\t\t\tObject.keys(nextProps.manifest.DestinyInventoryItemDefinition).map(weapon => {\n\t\t\t\treturn nextProps.manifest.DestinyInventoryItemDefinition[weapon].itemType === 3\n\t\t\t\t\t? weaponList.push(nextProps.manifest.DestinyInventoryItemDefinition[weapon])\n\t\t\t\t\t: null\n\t\t\t})\n\n\t\t\tconst filters = nextProps.filters;\n\n\t\t\t// Weapon Rarity\n\t\t\tif ( filters.rarity ) {\n\t\t\t\tweaponList = weaponList.filter(weapon => {\n\t\t\t\t\treturn weapon.inventory.tierTypeHash === filters.rarity \n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// Weapon Type\n\t\t\tif ( filters.weaponType ) {\n\t\t\t\tweaponList = weaponList.filter(weapon => {\n\t\t\t\t\treturn weapon.itemSubType === filters.weaponType \n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// Damage Type\n\t\t\tif ( filters.damage ) {\n\t\t\t\tweaponList = weaponList.filter(weapon => {\n\t\t\t\t\treturn weapon.defaultDamageTypeHash === filters.damage \n\t\t\t\t})\n\t\t\t}\n\n\t\t\tthis.setState({ \n\t\t\t\tmanifestLoaded: true,\n\t\t\t\tweaponList: weaponList,\n\t\t\t\tfilteredSuggestions: weaponList\n\t\t\t})\n\t\t}\n\t}\n\n\tonClick = (hash) => {\n\t\t// this.props.storeWeapon(hash);\t\n\t\t// this.props.storePerks(null, 0);\n\t\t// this.props.storePerks(null, 1);\n\t\t// this.props.storePerks(null, 2);\n\t\t// this.props.storePerks(null, 3);\n\n\t\tthis.setState({\n\t\t\tactiveSuggestion: 0,\n\t\t\tfilteredSuggestions: [],\n\t\t\tshowSuggestions: false,\n\t\t\tuserInput: ''\n\t\t})\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tstate: {\n\t\t\t\tweaponList,\n\t\t\t\tfilteredSuggestions,\n\t\t\t\tshowSuggestions,\n\t\t\t\tuserInput,\n\t\t\tprops: {\n\t\t\t\tmanifest\n\t\t\t}\n\t\t}\n\t\t} = this;\n\n\t\tlet suggestionsListComponent;\n\n\t\tif (showSuggestions && userInput) {\n\t\t\tif (filteredSuggestions.length) {\n\t\t\t\tsuggestionsListComponent = (\n\t\t\t\t\t<ul className=\"weapon-list__suggestions\">\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilteredSuggestions.map((suggestion) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<li \n\t\t\t\t\t\t\t\t\t\tkey={ suggestion.hash } \n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t// this.props.setActiveWeapon(suggestion.hash); \n\t\t\t\t\t\t\t\t\t\t\tthis.onClick(suggestion.hash)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className=\"weapon-list__item-icon\">\n\t\t\t\t\t\t\t\t\t\t\t<img src={`https://www.bungie.net${manifest.DestinyInventoryItemDefinition[suggestion.hash].displayProperties.icon}`} alt=\"\"/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"weapon-list__item-title\">\n\t\t\t\t\t\t\t\t\t\t\t<span className='weapon-list__item-name'>{ manifest.DestinyInventoryItemDefinition[suggestion.hash].displayProperties.name }</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className='weapon-list__item-type'>{ manifest.DestinyInventoryItemDefinition[suggestion.hash].itemTypeDisplayName }</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</ul>\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\tsuggestionsListComponent = (\n\t\t\t\t\t<ul className=\"weapon-list__suggestions no-suggestion\">\n\t\t\t\t\t\t<em>No weapon found. Use your light.</em>\n\t\t\t\t\t</ul>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{ suggestionsListComponent }\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n}\n\n// Autocomplete.propTypes = {\n// \tstoreWeapon: PropTypes.func.isRequired,\n// \tstorePerks: PropTypes.func.isRequired\n// };\n\nconst mapStateToProps = state => ({\n\tmanifest: state.manifest,\n\tfilters: state.filters,\n});\n\nexport default connect(mapStateToProps, { })(Autocomplete);"]},"metadata":{},"sourceType":"module"}