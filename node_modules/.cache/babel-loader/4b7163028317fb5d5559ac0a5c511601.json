{"ast":null,"code":"// Bungie API access convenience methods\nimport { Globals } from './globals';\n\nclass BungieError extends Error {\n  constructor(request) {\n    super(request.Message);\n    this.errorCode = request.ErrorCode;\n    this.errorStatus = request.ErrorStatus;\n  }\n\n}\n\nasync function apiRequest(path, stats = false) {\n  const options = {\n    headers: {\n      'X-API-Key': Globals.key.bungie\n    }\n  };\n  const request = await fetch(\"https://\".concat(stats ? 'stats' : 'www', \".bungie.net\").concat(path), options).then(r => r.json());\n\n  if (request.ErrorCode !== 1) {\n    throw new BungieError(request);\n  }\n\n  return request.Response;\n}\n\nexport const manifestIndex = async () => apiRequest('/Platform/Destiny2/Manifest/');\nexport const settings = async () => apiRequest(\"/Platform/Settings/\");\nexport const milestones = async () => apiRequest('/Platform/Destiny2/Milestones/');\nexport const manifest = async version => fetch(\"https://www.bungie.net\".concat(version)).then(a => a.json().then(() => true));\nexport const memberProfile = async (membershipType, membershipId, components) => apiRequest(\"/Platform/Destiny2/\".concat(membershipType, \"/Profile/\").concat(membershipId, \"/?components=\").concat(components));\nexport const memberGroups = async (membershipType, membershipId) => apiRequest(\"/Platform/GroupV2/User/\".concat(membershipType, \"/\").concat(membershipId, \"/0/1/\"));\nexport const GetGroupByName = async (groupName, groupType = 1) => apiRequest(\"/Platform/GroupV2/Name/\".concat(groupName, \"/\").concat(groupType, \"/\"));\nexport const groupMembers = async groupId => apiRequest(\"/Platform/GroupV2/\".concat(groupId, \"/Members/\"));\nexport const group = async groupId => apiRequest(\"/Platform/GroupV2/\".concat(groupId, \"/\"));\nexport const groupWeeklyRewardState = async groupId => apiRequest(\"/Platform/Destiny2/Clan/\".concat(groupId, \"/WeeklyRewardState/\"));\nexport const getHistoricalStats = async (membershipType, membershipId, characterId = '0', groups, modes, periodType) => apiRequest(\"/Platform/Destiny2/\".concat(membershipType, \"/Account/\").concat(membershipId, \"/Character/0/Stats/?groups=\").concat(groups, \"&modes=\").concat(modes, \"&periodType=\").concat(periodType));\nexport const playerSearch = async (membershipType, displayName) => apiRequest(\"/Platform/Destiny2/SearchDestinyPlayer/\".concat(membershipType, \"/\").concat(encodeURIComponent(displayName), \"/\"));\nexport const activityHistory = async (membershipType, membershipId, characterId, count, mode = false, page) => apiRequest(\"/Platform/Destiny2/\".concat(membershipType, \"/Account/\").concat(membershipId, \"/Character/\").concat(characterId, \"/Stats/Activities/?page=\").concat(page).concat(mode ? \"&mode=\".concat(mode) : '', \"&count=\").concat(count));\nexport const PGCR = async id => apiRequest(\"/Platform/Destiny2/Stats/PostGameCarnageReport/\".concat(id, \"/\"), true);","map":{"version":3,"sources":["/Users/aundrekerr/Projects/React2019/gunsmith3/src/utils/bungie.js"],"names":["Globals","BungieError","Error","constructor","request","Message","errorCode","ErrorCode","errorStatus","ErrorStatus","apiRequest","path","stats","options","headers","key","bungie","fetch","then","r","json","Response","manifestIndex","settings","milestones","manifest","version","a","memberProfile","membershipType","membershipId","components","memberGroups","GetGroupByName","groupName","groupType","groupMembers","groupId","group","groupWeeklyRewardState","getHistoricalStats","characterId","groups","modes","periodType","playerSearch","displayName","encodeURIComponent","activityHistory","count","mode","page","PGCR","id"],"mappings":"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","sourcesContent":["// Bungie API access convenience methods\nimport {\n\tGlobals\n} from './globals';\n\nclass BungieError extends Error {\n\tconstructor(request) {\n\t\tsuper(request.Message);\n\t\tthis.errorCode = request.ErrorCode;\n\t\tthis.errorStatus = request.ErrorStatus;\n\t}\n}\n\nasync function apiRequest(path, stats = false) {\n\tconst options = {\n\t\theaders: {\n\t\t\t'X-API-Key': Globals.key.bungie\n\t\t}\n\t};\n\tconst request = await fetch(`https://${stats ? 'stats' : 'www'}.bungie.net${path}`, options).then(r => r.json());\n\tif (request.ErrorCode !== 1) {\n\t\tthrow new BungieError(request);\n\t}\n\treturn request.Response;\n}\n\nexport const manifestIndex = async() => apiRequest('/Platform/Destiny2/Manifest/');\nexport const settings = async() => apiRequest(`/Platform/Settings/`);\nexport const milestones = async() => apiRequest('/Platform/Destiny2/Milestones/');\nexport const manifest = async version => fetch(`https://www.bungie.net${version}`).then(a => a.json().then(() => true));\nexport const memberProfile = async(membershipType, membershipId, components) => apiRequest(`/Platform/Destiny2/${membershipType}/Profile/${membershipId}/?components=${components}`);\nexport const memberGroups = async(membershipType, membershipId) => apiRequest(`/Platform/GroupV2/User/${membershipType}/${membershipId}/0/1/`);\nexport const GetGroupByName = async(groupName, groupType = 1) => apiRequest(`/Platform/GroupV2/Name/${groupName}/${groupType}/`);\nexport const groupMembers = async groupId => apiRequest(`/Platform/GroupV2/${groupId}/Members/`);\nexport const group = async groupId => apiRequest(`/Platform/GroupV2/${groupId}/`);\nexport const groupWeeklyRewardState = async groupId => apiRequest(`/Platform/Destiny2/Clan/${groupId}/WeeklyRewardState/`);\nexport const getHistoricalStats = async(membershipType, membershipId, characterId = '0', groups, modes, periodType) => apiRequest(`/Platform/Destiny2/${membershipType}/Account/${membershipId}/Character/0/Stats/?groups=${groups}&modes=${modes}&periodType=${periodType}`);\nexport const playerSearch = async(membershipType, displayName) => apiRequest(`/Platform/Destiny2/SearchDestinyPlayer/${membershipType}/${encodeURIComponent(displayName)}/`);\nexport const activityHistory = async(membershipType, membershipId, characterId, count, mode = false, page) => apiRequest(`/Platform/Destiny2/${membershipType}/Account/${membershipId}/Character/${characterId}/Stats/Activities/?page=${page}${mode ? `&mode=${mode}` : ''}&count=${count}`);\nexport const PGCR = async id => apiRequest(`/Platform/Destiny2/Stats/PostGameCarnageReport/${id}/`, true);"]},"metadata":{},"sourceType":"module"}