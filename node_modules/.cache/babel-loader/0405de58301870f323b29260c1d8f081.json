{"ast":null,"code":"let manifest;\nlet mwCollection = {\n  stability: {\n    benefits: [],\n    hash: 155624089\n  },\n  range: {\n    benefits: [],\n    hash: 1240592695\n  },\n  handling: {\n    benefits: [],\n    hash: 943549884\n  },\n  damage: {\n    // Impact\n    benefits: [],\n    hash: 4043523819\n  },\n  reload: {\n    benefits: [],\n    hash: 4188031367\n  },\n  blast_radius: {\n    benefits: [],\n    hash: 3614673599\n  },\n  projectile_speed: {\n    // Velocity\n    benefits: [],\n    hash: 2523465841\n  },\n  charge_time: {\n    benefits: [],\n    hash: 2961396640\n  },\n  draw_time: {\n    benefits: [],\n    hash: 447667954\n  },\n  accuracy: {\n    benefits: [],\n    hash: 1591432999\n  }\n};\nexport function getMasterworks(theManifest, weaponHash) {\n  let manifest = theManifest;\n  const itemDef = manifest.DestinyInventoryItemDefinition[weaponHash];\n  const socketEntries = itemDef.sockets.socketEntries;\n\n  if (!itemDef.sockets || !itemDef.sockets.socketEntries) {\n    return null;\n  }\n\n  if (!socketEntries) {\n    return null;\n  }\n\n  populateMasterworks(socketEntries);\n  console.log(mwCollection);\n}\n\nfunction noRandomPerks(socket) {\n  return socket.randomizedPlugItems.length === 0;\n}\n\nfunction populateMasterworks(sockets) {\n  // Weapon has random perks.\n  if (!sockets.every(noRandomPerks)) {\n    // Map through slots to find ones that are genuine perks.\n    sockets.map(socket => {\n      if (socket.plugSources === 3 // not perks\n      && socket.preventInitializationOnVendorPurchase === true // something only MWs had???\n      && socket.socketTypeHash !== 1288200359 // not default shader\n      ) {\n          console.log(socket); // Map through MW levels\n\n          socket.reusablePlugItems.map(mw => {\n            const mwDef = manifest.DestinyInventoryItemDefinition[mw.plugItemHash];\n            const mwStatSplit = mwDef.plug.plugCategoryIdentifier.split('.');\n            const mwStatName = mwStatSplit[mwStatSplit.length - 1];\n            mwCollection[mwStatName].benefits.push(mwDef);\n          });\n        }\n    });\n  }\n\n  return;\n}","map":{"version":3,"sources":["/Users/aundrekerr/Projects/React2019/gunsmith3/src/utils/masterworks.js"],"names":["manifest","mwCollection","stability","benefits","hash","range","handling","damage","reload","blast_radius","projectile_speed","charge_time","draw_time","accuracy","getMasterworks","theManifest","weaponHash","itemDef","DestinyInventoryItemDefinition","socketEntries","sockets","populateMasterworks","console","log","noRandomPerks","socket","randomizedPlugItems","length","every","map","plugSources","preventInitializationOnVendorPurchase","socketTypeHash","reusablePlugItems","mw","mwDef","plugItemHash","mwStatSplit","plug","plugCategoryIdentifier","split","mwStatName","push"],"mappings":"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","sourcesContent":["let manifest;\n\nlet mwCollection = {\n\tstability: { \n\t\tbenefits: [],\n\t\thash: 155624089,\n\t},\n\trange: { \n\t\tbenefits: [],\n\t\thash: 1240592695,\n\t},\n\thandling: { \n\t\tbenefits: [],\n\t\thash: 943549884,\n\t},\n\tdamage: { // Impact\n\t\tbenefits: [], \n\t\thash: 4043523819,\n\t},\n\treload: { \n\t\tbenefits: [],\n\t\thash: 4188031367,\n\t},\n\tblast_radius: { \n\t\tbenefits: [],\n\t\thash: 3614673599,\n\t},\n\tprojectile_speed: { // Velocity\n\t\tbenefits: [], \n\t\thash: 2523465841,\n\t},\n\tcharge_time: { \n\t\tbenefits: [],\n\t\thash: 2961396640,\n\t},\n\tdraw_time: { \n\t\tbenefits: [],\n\t\thash: 447667954,\n\t},\n\taccuracy: { \n\t\tbenefits: [],\n\t\thash: 1591432999,\n\t},\n};\n\nexport function getMasterworks(\n\ttheManifest,\n\tweaponHash\n) {\n\tlet manifest = theManifest;\n\tconst itemDef = manifest.DestinyInventoryItemDefinition[weaponHash];\n\tconst socketEntries = itemDef.sockets.socketEntries;\n\n\tif (!itemDef.sockets || !itemDef.sockets.socketEntries) {\n\t\treturn null;\n\t}\n\n\tif (!socketEntries) {\n\t\treturn null;\n\t}\n\n\tpopulateMasterworks(socketEntries)\n\t\n\tconsole.log(mwCollection);\n}\n\nfunction noRandomPerks (\n\tsocket\n) {\n\treturn socket.randomizedPlugItems.length === 0\n}\n\nfunction populateMasterworks (\n\tsockets\n) {\n\t// Weapon has random perks.\n\tif ( !sockets.every(noRandomPerks) ) {\n\t\t// Map through slots to find ones that are genuine perks.\n\t\tsockets.map(socket => {\n\t\t\tif (socket.plugSources === 3 // not perks\n\t\t\t\t&& socket.preventInitializationOnVendorPurchase === true // something only MWs had???\n\t\t\t\t&& socket.socketTypeHash !== 1288200359 // not default shader\n\t\t\t) {\n\t\t\t\tconsole.log(socket\t)\n\t\t\t\t// Map through MW levels\n\t\t\t\tsocket.reusablePlugItems.map(mw => {\n\t\t\t\t\tconst mwDef = manifest.DestinyInventoryItemDefinition[mw.plugItemHash];\n\t\t\t\t\tconst mwStatSplit = mwDef.plug.plugCategoryIdentifier.split('.');\n\t\t\t\t\tconst mwStatName = mwStatSplit[mwStatSplit.length - 1];\n\t\t\t\t\t\n\t\t\t\t\tmwCollection[mwStatName].benefits.push(mwDef)\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n\n\treturn;\n}"]},"metadata":{},"sourceType":"module"}